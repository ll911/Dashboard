var F=Object.defineProperty;var h=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var w=(s,e,t)=>e in s?F(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,f=(s,e)=>{for(var t in e||(e={}))A.call(e,t)&&w(s,t,e[t]);if(h)for(var t of h(e))z.call(e,t)&&w(s,t,e[t]);return s};import{_ as $,m as B,d as l}from"./index.f53ec8b0.js";import{h as I,i as D,r as u,K as x,e as N,g as r,A as b,E as m,O as j,d as L}from"./vendor.f6148a0a.js";var R="./assets/clear-day.1750460c.svg",U="./assets/cloudy.166af3f1.svg",k="./assets/drizzle.52d1ab01.svg",M="./assets/fog.f25816bc.svg",W="./assets/hurricane.bf691091.svg",O="./assets/mist.a73979af.svg",p="./assets/not-available.370934e3.svg",T="./assets/overcast-day.65e5e477.svg",q="./assets/overcast.404c05a4.svg",K="./assets/rain.5cfdb502.svg",P="./assets/sleet.4e1d5513.svg",V="./assets/snow.3716e1b7.svg",G="./assets/thermometer-colder.27e44f79.svg",H="./assets/thermometer-warmer.a2cb4247.svg",J="./assets/thunderstorms-rain.a29ad635.svg",Q="./assets/wind.2fc5eaed.svg",X="./assets/clear-day.49d8c731.svg",Y="./assets/cloudy.748e25f6.svg",Z="./assets/drizzle.a4dba4de.svg",ss="./assets/fog.3b9c20d0.svg",es="./assets/hurricane.f598fa4b.svg",ts="./assets/mist.6bc8e890.svg",as="./assets/not-available.71622bd8.svg",is="./assets/overcast-day.8a30a844.svg",os="./assets/overcast.49e2e20c.svg",rs="./assets/rain.b26b9aff.svg",ns="./assets/sleet.ff126866.svg",cs="./assets/snow.050f823c.svg",us="./assets/thermometer-colder.761f5be2.svg",gs="./assets/thermometer-warmer.dfa3e251.svg",_s="./assets/thunderstorms-rain.5c8d2cef.svg",vs="./assets/wind.e44ecfa2.svg";function E(s){return s.includes("\u98CE")?["\u9F99\u5377\u98CE","\u72C2\u7206\u98CE","\u98D3\u98CE","\u70ED\u5E26\u98CE\u66B4"].includes(s)?"\u9F99\u5377\u98CE":"\u98CE":s.includes("\u973E")||s.includes("\u96FE")?["\u91CD","\u5927","\u6D53","\u6C99","\u5C18"].some(e=>s.includes(e))?"\u5927\u96FE":"\u5C0F\u96FE":s.includes("\u96E8")?s.includes("\u96F7")?"\u96F7\u9635\u96E8":s.includes("\u96EA")?"\u96E8\u5939\u96EA":s.includes("\u5927")||s.includes("\u66B4")?"\u5927\u96E8":"\u5C0F\u96E8":s.includes("\u96EA")?"\u96EA":s}const ls={\u6674:"clear-day",\u5C11\u4E91:"cloudy",\u6674\u95F4\u591A\u4E91:"overcast-day",\u591A\u4E91:"overcast",\u9634:"overcast",\u5E73\u9759:"overcast",\u98CE:"wind",\u9F99\u5377\u98CE:"hurricane",\u5927\u96FE:"fog",\u5C0F\u96FE:"mist",\u96F7\u9635\u96E8:"thunderstorms-rain",\u5927\u96E8:"rain",\u5C0F\u96E8:"drizzle",\u96E8\u5939\u96EA:"sleet",\u96EA:"snow",\u70ED:"thermometer-warmer",\u51B7:"thermometer-colder",\u672A\u77E5:"not-available"};function ms(s){return new URL({"../../assets/imgs/weather-animation-icon/clear-day.svg":X,"../../assets/imgs/weather-animation-icon/cloudy.svg":Y,"../../assets/imgs/weather-animation-icon/drizzle.svg":Z,"../../assets/imgs/weather-animation-icon/fog.svg":ss,"../../assets/imgs/weather-animation-icon/hurricane.svg":es,"../../assets/imgs/weather-animation-icon/mist.svg":ts,"../../assets/imgs/weather-animation-icon/not-available.svg":as,"../../assets/imgs/weather-animation-icon/overcast-day.svg":is,"../../assets/imgs/weather-animation-icon/overcast.svg":os,"../../assets/imgs/weather-animation-icon/rain.svg":rs,"../../assets/imgs/weather-animation-icon/sleet.svg":ns,"../../assets/imgs/weather-animation-icon/snow.svg":cs,"../../assets/imgs/weather-animation-icon/thermometer-colder.svg":us,"../../assets/imgs/weather-animation-icon/thermometer-warmer.svg":gs,"../../assets/imgs/weather-animation-icon/thunderstorms-rain.svg":_s,"../../assets/imgs/weather-animation-icon/wind.svg":vs}[`../../assets/imgs/weather-animation-icon/${s}.svg`],self.location).href}function ds(s){return new URL({"../../assets/imgs/weather-static-icon/clear-day.svg":R,"../../assets/imgs/weather-static-icon/cloudy.svg":U,"../../assets/imgs/weather-static-icon/drizzle.svg":k,"../../assets/imgs/weather-static-icon/fog.svg":M,"../../assets/imgs/weather-static-icon/hurricane.svg":W,"../../assets/imgs/weather-static-icon/mist.svg":O,"../../assets/imgs/weather-static-icon/not-available.svg":p,"../../assets/imgs/weather-static-icon/overcast-day.svg":T,"../../assets/imgs/weather-static-icon/overcast.svg":q,"../../assets/imgs/weather-static-icon/rain.svg":K,"../../assets/imgs/weather-static-icon/sleet.svg":P,"../../assets/imgs/weather-static-icon/snow.svg":V,"../../assets/imgs/weather-static-icon/thermometer-colder.svg":G,"../../assets/imgs/weather-static-icon/thermometer-warmer.svg":H,"../../assets/imgs/weather-static-icon/thunderstorms-rain.svg":J,"../../assets/imgs/weather-static-icon/wind.svg":Q}[`../../assets/imgs/weather-static-icon/${s}.svg`],self.location).href}function hs(s,e=!0){const t=E(s)||"\u672A\u77E5",a=ls[t]||"not-available";return e===!1?ds(a):ms(a)}const ws=I({name:"Weather",props:{componentSetting:{type:Object,required:!0}},setup(s){const e=D(()=>B(s.componentSetting.position)),t=u(""),a=u(""),g=u(p),_=u("24"),d=u("\u672A\u77E5"),y=async()=>{const n=await fetch(`${l}/tapi/amap/v3/weather/weatherInfo?extensions=base&city=${a.value}`),{status:c,lives:i}=await n.json();if(c==="1"){const{weather:o,temperature:v}=i[0];g.value=hs(o,s.componentSetting.animationIcon),d.value=E(o),_.value=v}};return x(()=>[s.componentSetting.weatherMode,s.componentSetting.cityName,s.componentSetting.animationIcon],async()=>{try{if(s.componentSetting.weatherMode===1){const n=await fetch(`${l}/tapi/amap/v3/ip`),{status:c,adcode:i,city:o}=await n.json();c==="1"&&(t.value=o.replace(/[市城区]/g,""),a.value=i)}else{const n=await fetch(`${l}/tapi/amap/v3/config/district?keywords=${s.componentSetting.cityName}&subdistrict=0`),{status:c,districts:i}=await n.json();if(c==="1"&&i.length>0){const o=i.find(S=>S.level==="city"),{adcode:v,name:C}=o;t.value=C.replace(/[市城区]/g,""),a.value=v}}}catch{j({title:"\u63D0\u793A",type:"error",message:"\u65E0\u6CD5\u8BC6\u522B\u51FA\u57CE\u5E02\uFF0C\u8BF7\u91CD\u65B0\u914D\u7F6E"})}y()},{immediate:!0}),{positionCSS:e,cityName:t,adcode:a,weatherIcon:g,weatherText:d,temperature:_}}}),fs={class:"weather-box"},bs={class:"weather-icon-wrapper"},ps=["src"],Es={class:"weather-text-wrapper"},ys={class:"temperature"},Cs={class:"city"};function Ss(s,e,t,a,g,_){return L(),N("div",{class:"wrapper",style:b(f({fontSize:s.componentSetting.baseFontSize+"px",color:s.componentSetting.textColor,textShadow:s.componentSetting.textShadow,padding:s.componentSetting.padding+"px",fontFamily:s.componentSetting.fontFamily},s.positionCSS))},[r("div",fs,[r("div",bs,[r("img",{src:s.weatherIcon,style:b({filter:`drop-shadow(${s.componentSetting.iconShadow})`}),alt:"weather icon"},null,12,ps)]),r("div",Es,[r("div",ys,m(s.temperature)+"\xB0",1),r("div",Cs,m(s.cityName)+" | "+m(s.weatherText),1)])])],4)}var $s=$(ws,[["render",Ss],["__scopeId","data-v-e668c9c0"]]);export{$s as default};
